# NestedParser

**NestedParser** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π (human-readable hierarchical texts). –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã
- –ø–∞—Ä—Å–∏–Ω–≥ - –æ–±—Ö–æ–¥ —Ç–µ–∫—Å—Ç–∞ –∏ –≤—ã–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö callback —Ñ—É–Ω–∫—Ü–∏–π
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö - –ø–∞—Ä—Å–∏–Ω–≥ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –≤–∏–¥–µ JSON, –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π.

**NestedParser** –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏(–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏) –≤ JSON –∏–ª–∏ –æ–±—ä–µ–∫—Ç.  

## –ü–æ–Ω—è—Ç–∏—è
- –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç - —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞. –¢–µ–∫—Å—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å—Ç—Ä–æ–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–∞–º–∏ '\n' –∏–ª–∏ '\r\n'. –î–æ–ø—É—Å–∫–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
    - –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
    - –∏–º—è —Ñ–∞–π–ª–∞ - —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'file://' –∏–ª–∏ './' –∏–ª–∏ '../'
    - url - —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'http://' –∏–ª–∏ 'https://' 
    - URL - –æ–±—ä–µ–∫—Ç URL
    - stream - –ø–æ—Ç–æ–∫ (ReadableStream)
    - function - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –ø–æ—Ç–æ–∫
- —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã - '\n', '`', ';' - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–µ—Ç–∫–µ —Ç–µ–∫—Å—Ç–∞
- —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–µ–ª–æ–≤ (—Å–∏–º–≤–æ–ª–æ–≤ —Ç–∞–±—É–ª—è—Ü–∏–∏) –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –Ω–µ –ø—Ä–æ–±–µ–ª—å–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞. –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–º–µ—Å—å –∏–∑ —Ç–∞–±—É–ª—è—Ü–∏–π –∏ –ø—Ä–æ–±–µ–ª–æ–≤. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π(–±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π) —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –±–æ–ª—å—à–µ —á–µ–º —É –ø—Ä–µ–¥—ã–¥—É—â–µ–π. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π(–±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–π) —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–∫—É—â–∏–º –∏–ª–∏ –æ–¥–Ω–∏–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö. –£—Å–ª–æ–≤–∏–µ, —á—Ç–æ –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—Ä–∞—Ç–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä 2 –∏–ª–∏ 4) - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
- –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π - —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Å–∏–º–≤–æ–ª–∞ '#', –ø–µ—Ä–µ–¥ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–µ–ª–æ–≤, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏, –∫–æ–Ω–µ—á–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã
- –∑–Ω–∞—á–µ–Ω–∏–µ - —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏, –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤. –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã. –ù–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–Ω–µ—á–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –æ–±—Ä—É–±–∞—é—Ç—Å—è. 
- –ª–∏—Ç–µ—Ä–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –∑–∞–∫–ª—é—á–µ–Ω–Ω–∞—è –≤ –æ–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ ('`'), –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã. –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ª–∏—Ç–µ—Ä–∞–ª—å–Ω—ã–º. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.
- –ø—Ä–∏–∑–Ω–∞–∫ –º–∞—Å—Å–∏–≤–∞ - –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —Å–∏–º–≤–æ–ª–æ–º ';' —ç—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–∑–Ω–∞–∫–æ–º –º–∞—Å—Å–∏–≤–∞ –∑–Ω–∞—á–µ–Ω–∏–π. –¢–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞(—Å—Ç—Ä–æ–∫–∏) —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞.
- –∏–º—è —É–∑–ª–∞ - –ø–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫–µ, –æ—Ç–¥–µ–ª–µ–Ω–Ω–æ–µ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ –ø—Ä–æ–±–µ–ª–æ–º.

## –°–æ–±—ã—Ç–∏—è

- **parserStarted** - –Ω–∞—á–∞–ª–æ —Ä–∞–∑–±–æ—Ä–∞
- **parserEnded** - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–∑–±–æ—Ä–∞
- **levelUp** - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏
- **levelDown** - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏
- **rowDetected** - —Å—Ç—Ä–æ–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∞
- **nameDetected** - –∏–º—è –≤—ã–¥–µ–ª–µ–Ω–æ
- **valuesDetected** - –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω—ã
- **commentDetected** - –≤—Å—Ç—Ä–µ—á–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- **errorDetected** - –≤—Å—Ç—Ä–µ—á–µ–Ω–∞ –æ—à–∏–±–∫–∞


–í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ. –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫, —Ç–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

## –ü—Ä–∏–º–µ—Ä

```
# this is comment 1
root 1 
    child1 1
    child2 value of child 2
    child3 `very long value of child 3
            very long value of child 3
            very long value of child 3
            `
    child4 4
        grand_child_1 41
        `grand child 2` 420, 421, 422
# this is comment 2
root 2
```

–ü—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ —ç—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
```
- parseStarted(undefined, undefined)
- commentDetected(0, 'this is comment 1')
- rowDetected(1, 'root 1')
- nameDetected(1, 'root')
- valuesDetected(1, ['1'])
- levelUp(2, undefined)
- rowDetected(2, 'child1 1')
- nameDetected(2, 'child1')
- valuesDetected(2, ['1'])
- rowDetected(2, 'child2  value of child 2')
- nameDetected(3, 'child2')
- valuesDetected(3, ['2'])
- rowDetected(4, 'child3  value of child 2')
- nameDetected(4, 'child3 'very long value of child 3 very long value of child 3 very long value of child 3`')
- valuesDetected(4, 'very long value of child 3 very long value of child 3 very long value of child 3')
- rowDetected(2, 'child4  4')
- nameDetected(8, 'child4')
- valuesDetected(8, ['4'])
- levelUp(8, undefined)
- rowDetected(9, 'grand_child_1 41')
- nameDetected(9, 'grand_child_1')
- valuesDetected(9, ['41'])
- rowDetected(10, '`grand child 2` 420, 421, 422')
- nameDetected(10, 'grand child 2')
- valuesDetected(10, ['420', '421', '422'])
- commentDetected(11, 'this is comment 2')
- levelDown(12, undefined)
- levelDown(12, undefined)
- rowDetected(9, 'root 2')
- nameDetected(12, 'root')
- valuesDetected(12, '2')
- parseEnded(undefined, undefined)
```
## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ

> ‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü–∞–∫–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ npm, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

#### –õ–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

**–°–ø–æ—Å–æ–± 1: npm link**
```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ NestedParser
npm link

# –í –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ
npm link nested-parser
```

**–°–ø–æ—Å–æ–± 2: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å**
–í `package.json` –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
```json
{
  "dependencies": {
    "nested-parser": "file:../NestedParser"
  }
}
```

**–°–ø–æ—Å–æ–± 3: –ü—Ä—è–º–æ–π –ø—É—Ç—å (Windows)**
```json
{
  "dependencies": {
    "nested-parser": "file:D:/MProjects/NestedParser"
  }
}
```

#### –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ npm (–¥–ª—è –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

```bash
# 1. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
bun run build

# 2. –í–æ–π–¥–∏—Ç–µ –≤ npm
npm login

# 3. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ
npm publish
# –ò–ª–∏ –¥–ª—è scoped package: npm publish --access public
```

–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:
```bash
npm install nested-parser
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
npm install
# –∏–ª–∏
bun install
```

## –°–±–æ—Ä–∫–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–±–æ—Ä–∫—É –≤ –¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞: CommonJS –∏ ES6 –º–æ–¥—É–ª–∏.

```bash
# –°–±–æ—Ä–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
npm run build

# –°–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ CommonJS
npm run build:cjs

# –°–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ ES6 –º–æ–¥—É–ª–µ–π
npm run build:esm

# –û—á–∏—Å—Ç–∫–∞ —Å–±–æ—Ä–æ—á–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
npm run clean
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**: —Å–º. [USAGE.md](./USAGE.md)

### CommonJS (Node.js)

```javascript
const { NestedParser, ArrayScheme, ObjectScheme } = require('nested-parser');

async function main() {
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å ArrayScheme (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤)
    const parser1 = new NestedParser({ logParser: false }, new ArrayScheme());
    const result1 = await parser.parse('./example.txt');
    console.log(JSON.stringify(result1, null, 2));

    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å ObjectScheme (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç)
    const parser2 = new NestedParser({ logParser: false }, new ObjectScheme());
    const result2 = await parser.parse('./example.txt');
    console.log(JSON.stringify(result2, null, 2));

    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
    const parser3 = new NestedParser({ logParser: true }, new ArrayScheme());
    await parser3.parse('./example.txt');
}

main().catch(console.error);
```

### ES6 –º–æ–¥—É–ª–∏

```javascript
import { NestedParser, ArrayScheme, ObjectScheme } from 'nested-parser';

async function main() {
    const parser = new NestedParser({ logParser: false }, new ArrayScheme());
    const result = await parser.parse('./example.txt');
    console.log(JSON.stringify(result, null, 2));
}

main().catch(console.error);
```

### TypeScript

```typescript
import { NestedParser, ArrayScheme, ObjectScheme, ParserCallbacks } from 'nested-parser';

async function main() {
    const parser = new NestedParser({ logParser: false }, new ArrayScheme());
    const result = await parser.parse('./example.txt');
    console.log(result);
}

main().catch(console.error);
```

### –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```javascript
import { NestedParser } from 'nested-parser';

const parser = new NestedParser();

// –¢–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
const nodes1 = await parser.parse('Root\n  Child');

// –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
const nodes2 = await parser.parse('./data.txt');
const nodes3 = await parser.parse('file:///path/to/file.txt');

// URL
const nodes4 = await parser.parse('https://example.com/data.txt');
const nodes5 = await parser.parse(new URL('https://example.com/data.txt'));

// ReadableStream
import fs from 'fs';
const nodes6 = await parser.parse(fs.createReadStream('data.txt'));

// –§—É–Ω–∫—Ü–∏—è
const nodes7 = await parser.parse(() => 'Root\n  Child');
const nodes8 = await parser.parse(() => fs.createReadStream('data.txt'));
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
NestedParser/
‚îú‚îÄ‚îÄ src/              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ TypeScript
‚îú‚îÄ‚îÄ lib/              # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ cjs/          # CommonJS –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ esm/          # ES6 –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îî‚îÄ‚îÄ *.d.ts        # TypeScript –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤
‚îú‚îÄ‚îÄ scripts/          # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ tsconfig.json     # –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îú‚îÄ‚îÄ tsconfig.cjs.json # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è CommonJS
‚îú‚îÄ‚îÄ tsconfig.esm.json # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è ES6 –º–æ–¥—É–ª–µ–π
‚îî‚îÄ‚îÄ tsconfig.types.json # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ç–∏–ø–æ–≤
```

Node.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª–æ–≤–∏–π –≤ `package.json` exports.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install` –∏–ª–∏ `bun install`
2. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/`
3. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `bun run build` –∏–ª–∏ `npm run build`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `lib/`

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ (–ª–æ–∫–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤ –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ:

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ NestedParser
npm link
# –∏–ª–∏
bun link

# –í –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ
npm link nested-parser
# –∏–ª–∏
bun link nested-parser
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –≤ `package.json` –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```json
{
  "dependencies": {
    "nested-parser": "file:../path/to/NestedParser"
  }
}
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
